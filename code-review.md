1. Проблема намешенной логики в слоях инфтрастктурных + представления + контроллерах, ее требуется объеденитиь и вынести в UseCase, там где требуются внутренние зависимости Domain в Service
2. Прописать везде declare(strict_types=1); для владиации
3. Добавить phpdoc
4. Вынести продукт в домейн
5. В исходном коде контроллеры смешивают получение данных и их преобразование в JSON. Лучше вынести преобразование в отдельные трансформеры/презентеры (сделано в рефакторе).
6. Хранилище корзины должно уметь сообщать об ошибках записи/чтения Redis — в исходнике это было спрятано в Connector без логирования причины.
7. В домене у корзины не должно быть инфраструктурных зависимостей, (Разделение на слои)
8. TTL для корзины должен задаваться константой/конфигом, лучше через енв
9. Контроллеры должны получать идентификатор корзины унифицированно (сессия/токен), а не по-разному в разных местах
